\documentclass[a4paper, twoside]{article}

\usepackage{verbatim}

\setlength{\oddsidemargin}{0in} \setlength{\evensidemargin}{0in}
\setlength{\textwidth}{6.2in}
\setlength{\topmargin}{-0.3in} \setlength{\textheight}{9.8in}
\setlength{\parskip}{0.3in}

\title{CS23710 - Runners and Riders}
\author{Tom Leaman (thl5)}

\begin{document}
\maketitle

\section{Design}
\subsection{Program loop \& main}
The main function (in main.c) is a very simple function which starts by reading
in the data from the user supplied filenames and then executes a while loop
which displays the menu, prompts for input and then calls helper functions
based on what the user requires from the program.

\subsection{Nodes \& tracks}
The nodes and tracks are designed as very simple data structures which hold the
data as it comes out of the files. The tracks are created in duplicate, one
from start node to end node and one in reverse, this simplifies the code which
finds a track from two nodes and also allows for alternative safe completion
times in the future (e.g. going up a hill may take longer than going down a
hill).

\subsection{Courses}
The courses are similarly quite simple data structures that also hold a pointer
to a vector of nodes and a pointer to a vector of tracks which comprise the
course. These are used extensively when updating entrant's times and locations.

\subsection{Entrant}
The entrant is one of the most complex data structures in the program. It holds
data on the id, name and course of the entrant. It also contains a pointer to
the last timed/medical checkpoint node and time, the last assumed node and time
and the current track and time. These are used to keep track of the entrant's
location around the course as they pass checkpoints. They are also used to
update which track the entrant is assumed to be on.

\subsection{Event}
The event contains the data read in from file (title, date and start time).
Once the other data has been read in, it also contains a pointer to a vector
of entrants and a pointer to a vector of nodes. The nodes are required for
finding entrants which have gone off-track.

\subsection{Vector}
I decided to implement an array-backed vector to store the data being passed to
the program. As the code does not know the size of the file before reading, I
felt that a dynamically resizable data structure would be preferable and a
vector seemed like the simplest option. I implemented all of the functionality
that I felt would be necessary (including originally a remove function which
proved to not be needed) and tested it with vectortest.c.

The vector uses a doubling strategy when it becomes full which means that it
will only resize every $2^n$ inserts. I think the benefit of readable,
understandable (I hope) code out-weighs the extra memory allocated at the
end of the vector.

I did contemplate implementing a generic linked list structure as well but I
actually don't believe it to be necessary; the only time data is being shuffled
around is when the vector resizes or when it is being sorted. The sorting
algorithm used is bubble sort which means that during any one operation, only
two sections of memory are being swapped. This (as far as I am concerned)
eliminates the benefit of using a linked list (the linked list would also have
more memory overhead per item due to each item needing a pointer to the next
node).

\newpage
\section{Compilation}
\subsection{Main Mission}

\subsection{Extended Mission}
\verbatiminput{extended_compilation.txt}

\newpage
\section{Output}
\subsection{Main Mission}

\newpage
\subsection{Extended Mission}
\verbatiminput{extended_output.txt}

\newpage
\section{Source}
\subsection{Main Mission}

\newpage
\subsection{Extended Mission}
\subsubsection{vector.h}
\verbatiminput{extended/vector.h}
\subsubsection{vector.c}
\verbatiminput{extended/vector.c}
\subsubsection{vectortest.c}
\verbatiminput{extended/vectortest.c}
\subsubsection{util.h}
\verbatiminput{extended/util.h}
\subsubsection{util.c}
\verbatiminput{extended/util.c}
\subsubsection{data.h}
\verbatiminput{extended/data.h}
\subsubsection{node.c}
\verbatiminput{extended/node.c}
\subsubsection{track.c}
\verbatiminput{extended/track.c}
\subsubsection{course.c}
\verbatiminput{extended/course.c}
\subsubsection{entrant.c}
\verbatiminput{extended/entrant.c}
\subsubsection{event.c}
\verbatiminput{extended/event.c}
\subsubsection{main.c}
\verbatiminput{extended/main.c}

\section{References}
\begin{itemize}
\item{1. http://cboard.cprogramming.com/c-programming/95462-compiler-error-warning-implicit-declaration-function-strdup.html (util.c)}
\item{2. http://stackoverflow.com/questions/314401/how-to-read-a-line-from-the-console-in-c (util.c)}
\end{itemize}

\end{document}
